---
title: "p8105_hw2_ys3924"
author: "YISU"
date: "2024-10-02"
output: github_document
---

```{r setup, message=FALSE}
library(tidyverse)
library(readxl)
```

# Problem 1

## Read in and clean NYC Transit data

```{r, message=FALSE, warning=FALSE}
NYC_transit = 
  read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") |>
  janitor::clean_names() |>
  select(line:entry, vending, ada) |>
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

The NYC Transit dataset contains subway line, station name, station latitude and longitude, routes served, entry, vending, entrance type, and ADA compliance.

In my data cleaning process, I first used janitor::clean_names() function to convert all column names to lowercase. Then I selected the key factors needed for this analysis. Finally, I transformed the entry variable from a "YES"/"NO" character format to a logical TRUE/FALSE. 

There are 1868 rows and 19 columns for this resulting dataset. 

## Count distinct stations

```{r}
num_distinct_stations = NYC_transit |>
  distinct(station_name, line) |>
  nrow()
```

There are `r num_distinct_stations` distinct stations.

## Count ADA stations 

```{r}
num_ada = NYC_transit |>
  filter(ada == TRUE) |>
  distinct(station_name, line) |>
  nrow()
```

There are `r num_ada` ADA compliant stations.

## Calculate proportion of station entrances / exits without vending allow entrance

```{r}
num_no_vending = NYC_transit |>
  filter(vending == "NO") |>
  nrow()
proportion_no_vending = num_no_vending / nrow(NYC_transit)
```

The proportion of station entrances / exits without vending allow entrance is `r proportion_no_vending`.


# Problem 2

## Read in and clean Mr.Trash Wheel data

```{r}
mr_trash_wheel = read_excel("data/202409 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", na = c("NA", ".", ""), skip = 1) |>
  janitor::clean_names() |>
  select(dumpster:homes_powered) |>
  mutate(sports_balls = as.integer(round(sports_balls, 0)),
         trash_wheel_name = "Mr. Trash Wheel",
         year = as.numeric(year)) |>
  filter(!is.na(dumpster)) |>
  relocate(trash_wheel_name, dumpster)
```


